"use strict";(self.webpackChunklowcode_platform_docs=self.webpackChunklowcode_platform_docs||[]).push([["214"],{4958:function(e,n,r){r.r(n),r.d(n,{default:()=>a});var i=r("2676"),t=r("453");let l=r.p+"static/image/mater-create-query.efddff0c.png",d=r.p+"static/image/create-metrial.9cf508e3.png";function s(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",ol:"ol",li:"li",p:"p",pre:"pre",code:"code",h3:"h3",strong:"strong",div:"div",img:"img",h4:"h4",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",h5:"h5"},(0,t.ah)(),e.components);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"自定义物料",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义物料",children:"#"}),"自定义物料"]}),"\n",(0,i.jsxs)(n.h2,{id:"创建第一个物料",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#创建第一个物料",children:"#"}),"创建第一个物料"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"安装脚手架\r\n@wu-component/wu-cli 是于搭建平台配套使用的教授架，用于物料的创建、开发、发布（该脚手架不仅可以开发物料，也可以开发 WebComponent 以及传统的 Web 项目）。"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:"npm i @wu-component/wu-cli -g\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"创建项目"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:"wu create <application-app-name> -c material\r\n# 例如： wu create lowcode-test-component -c material\n"})}),"\n",(0,i.jsx)(n.p,{children:"application-app-name 为要创建的物料名称。"}),"\n",(0,i.jsx)(n.p,{children:"生成的目录结构如下："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:"├── demo                   \r\n|  └── basic.md\r\n├── example\r\n|  ├── example.css\r\n|  └── example.tsx\r\n├── index.html\r\n├── IProps.d.ts             // 组件的类型定义，最终会转换成组件配置项的 schema \r\n├── package-lock.json\r\n├── package.json\r\n├── README.md\r\n├── src                     // 组件开发工作区\r\n|  ├── index.scss           \r\n|  └── index.tsx            // 组件入口\r\n├── tsconfig.json\r\n├── tsconfig.node.json\r\n└── wu.config.ts            // 物料开发、构建、发布的配置项\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"开发服务器\r\n启动开发服务器就可以愉快的开发了， 命令如下（dev 脚本会执行 wu dev，底层依赖 vite 的 dev-server）："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:"npm run dev\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"物料发布",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#物料发布",children:"#"}),"物料发布"]}),"\n",(0,i.jsxs)(n.h3,{id:"物料构建",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#物料构建",children:"#"}),"物料构建"]}),"\n",(0,i.jsx)(n.p,{children:"执行构建命令 build， 命令如下（build 脚本会执行 wu build，底层依赖 vite 的构建）："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:"   npm run build\n"})}),"\n",(0,i.jsx)(n.p,{children:"构建的产物如下(和wu-config.ts 中的 format 关联)："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:" ├── es               // es 格式的产物\r\n ├── umd              // es 格式的产物\r\n ├── index.d.ts       // 类型文件\r\n └── schema.json      // 物料的 schema 协议\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"物料发布-1",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#物料发布-1",children:"#"}),"物料发布"]}),"\n",(0,i.jsx)(n.p,{children:"执行发布命令前，需要校验以下三项："}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"确保该物料在平台侧已经创建"}),"，进入",(0,i.jsx)(n.a,{href:"https://static-cdn.ry-ltd.site/lowcode-center-web/#/atomManagement/componentManage/list",rel:"noopener noreferrer",target:"_blank",children:"组件管理"}),"，根据组件名称（",(0,i.jsx)(n.strong,{children:"wu-config-ts 中 meta.lib.name属性"})," ）查询，如果组件不存在，则创建新组件。"]}),"\n",(0,i.jsx)(n.div,{className:"my-4 flex flex-row justify-center",children:(0,i.jsx)(n.img,{alt:"物料校验",src:l})}),"\n",(0,i.jsxs)(n.p,{children:["其中表单的 ",(0,i.jsx)(n.strong,{children:"组件名称、组件包名 都需要和 wu-config.ts 中一致， 对应 meta.lib.name、meta.lib.libName"}),"。"]}),"\n",(0,i.jsx)(n.div,{className:"my-4 flex flex-row justify-center",children:(0,i.jsx)(n.img,{alt:"创建物料",src:d})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"确保 package.json 中的 version 和已有版本不会冲突。"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"一切准备就绪后执行 发布命令："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:"wu upload\n"})}),"\n",(0,i.jsxs)(n.div,{className:"rspress-directive tip",children:[(0,i.jsx)(n.div,{className:"rspress-directive-title",children:"TIP"}),(0,i.jsx)(n.div,{className:"rspress-directive-content",children:(0,i.jsxs)(n.p,{children:["首次执行 ",(0,i.jsx)(n.code,{children:"wu upload"})," 时会执行登录授权的逻辑，控制台会提示自动打开浏览器进行登录授权（如无法自动打开浏览器，则可以手动复制 url 打开）。"]})})]}),"\n",(0,i.jsxs)(n.h3,{id:"升级线上版本",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#升级线上版本",children:"#"}),"升级线上版本"]}),"\n",(0,i.jsxs)(n.p,{children:["组件提示发布成功后，进入",(0,i.jsx)(n.a,{href:"https://static-cdn.ry-ltd.site/lowcode-center-web/#/atomManagement/componentManage/list",rel:"noopener noreferrer",target:"_blank",children:"组件管理"}),"，可以通过 版本日志查看组件详情，也可以酌情升级/发布组件。"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{meta:"",children:"    ✔ 物料上传成功\r\n    ✔ \uD83C\uDF89 \uD83C\uDF89 \uD83C\uDF89 \uD83C\uDF89 物料common-text@1.0.0发布成功，请前往物料中心升级！！！\n"})}),"\n",(0,i.jsxs)(n.h2,{id:"文件说明",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#文件说明",children:"#"}),"文件说明"]}),"\n",(0,i.jsxs)(n.h3,{id:"wuconfigts",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#wuconfigts",children:"#"}),"wu.config.ts"]}),"\n",(0,i.jsxs)(n.h4,{id:"配置示例",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置示例",children:"#"}),"配置示例"]}),"\n",(0,i.jsx)(n.p,{children:"wu.config.ts 基本配置如下："}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",meta:"",children:"\r\nimport { defineConfig } from '@wu-component/wu-cli';\r\n\r\nexport default defineConfig({\r\n  meta: {\r\n    type: 'material',\r\n    lib: {\r\n      libName: \"LowcodeTestComponent\",\r\n      name: \"lowcode-test-component\",\r\n      formats: ['umd', 'es'],\r\n      fileName: (_format) => `{{name}}.production.js`,\r\n      external: {\r\n        react: 'React',\r\n        'react-dom': 'ReactDOM',\r\n      }\r\n    },\r\n    user: {\r\n      // 平台域名，私有化部署时填写私有化部署的域名\r\n      // host: 'https://static-cdn.ry-ltd.site',\r\n      host: 'https://static-cdn.ry-ltd.site'\r\n    }\r\n  }\r\n})\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"配置项",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置项",children:"#"}),"配置项"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{align:"left",children:"名称"}),(0,i.jsx)(n.th,{align:"left",children:"类型"}),(0,i.jsx)(n.th,{align:"left",children:"必填"}),(0,i.jsx)(n.th,{align:"left",children:"默认值"}),(0,i.jsx)(n.th,{children:"说明"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"meta"}),(0,i.jsx)(n.td,{align:"left",children:"Meta"}),(0,i.jsx)(n.td,{align:"left",children:"是"}),(0,i.jsx)(n.td,{align:"left",children:"--"}),(0,i.jsx)(n.td,{children:"物料的元数据配置"})]})})]}),"\n",(0,i.jsxs)(n.h5,{id:"meta",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#meta",children:"#"}),"Meta"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{align:"left",children:"名称"}),(0,i.jsx)(n.th,{align:"left",children:"类型"}),(0,i.jsx)(n.th,{align:"left",children:"必填"}),(0,i.jsx)(n.th,{align:"left",children:"默认值"}),(0,i.jsx)(n.th,{children:"说明"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"type"}),(0,i.jsx)(n.td,{align:"left",children:"ProjectType"}),(0,i.jsx)(n.td,{align:"left",children:"是"}),(0,i.jsx)(n.td,{align:"left",children:"material"}),(0,i.jsx)(n.td,{children:"项目的类型，此时默认为 material，此值还可以是 web、web-component"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"lib"}),(0,i.jsx)(n.td,{align:"left",children:"ProjectLibConfig"}),(0,i.jsx)(n.td,{align:"left",children:"是"}),(0,i.jsx)(n.td,{align:"left",children:"--"}),(0,i.jsx)(n.td,{children:"物料构建、开发时的配置，创建项目时自动生成，可以自己修改"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"user"}),(0,i.jsx)(n.td,{align:"left",children:"CliUser"}),(0,i.jsx)(n.td,{align:"left",children:"否"}),(0,i.jsx)(n.td,{align:"left",children:"--"}),(0,i.jsx)(n.td,{children:"发布物料时的用户信息配置，1：需要在平台注册成为用户，2：首次发布物料需要登录授权"})]})]})]}),"\n",(0,i.jsxs)(n.h5,{id:"projectlibconfig",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#projectlibconfig",children:"#"}),"ProjectLibConfig"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{align:"left",children:"名称"}),(0,i.jsx)(n.th,{align:"left",children:"类型"}),(0,i.jsx)(n.th,{align:"left",children:"必填"}),(0,i.jsx)(n.th,{align:"left",children:"默认值"}),(0,i.jsx)(n.th,{children:"说明"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"libName"}),(0,i.jsx)(n.td,{align:"left",children:"String"}),(0,i.jsx)(n.td,{align:"left",children:"是"}),(0,i.jsx)(n.td,{align:"left",children:"自动生成"}),(0,i.jsx)(n.td,{children:"物料 umd 构建产物的变量名称，同 vite\\webpack 的 library.name 配置"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"name"}),(0,i.jsx)(n.td,{align:"left",children:"String"}),(0,i.jsx)(n.td,{align:"left",children:"是"}),(0,i.jsx)(n.td,{align:"left",children:"自动生成"}),(0,i.jsx)(n.td,{children:"物料名称，平台内必须保持唯一性"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"formats"}),(0,i.jsx)(n.td,{align:"left",children:"String[]"}),(0,i.jsx)(n.td,{align:"left",children:"是"}),(0,i.jsx)(n.td,{align:"left",children:"['umd', 'es', 'cjs', 'iife']"}),(0,i.jsx)(n.td,{children:"物料构建产物的类型，类似 vite\\webpack 的format 配置"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"fileName"}),(0,i.jsx)(n.td,{align:"left",children:"(format) =>String"}),(0,i.jsx)(n.td,{align:"left",children:"是"}),(0,i.jsxs)(n.td,{align:"left",children:["format => ",(0,i.jsx)(n.code,{children:"${format}.js"})]}),(0,i.jsx)(n.td,{children:"物料构建产物的fileName，类似 vite\\webpack fileName 配置"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"external"}),(0,i.jsx)(n.td,{align:"left",children:"Object"}),(0,i.jsx)(n.td,{align:"left",children:"否"}),(0,i.jsx)(n.td,{align:"left",children:"{react: 'React','react-dom': 'ReactDOM'}"}),(0,i.jsx)(n.td,{children:"物料构建 external，类似 vite\\webpack external 配置"})]})]})]}),"\n",(0,i.jsxs)(n.h5,{id:"cliuser",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cliuser",children:"#"}),"CliUser"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{align:"left",children:"名称"}),(0,i.jsx)(n.th,{align:"left",children:"类型"}),(0,i.jsx)(n.th,{align:"left",children:"必填"}),(0,i.jsx)(n.th,{align:"left",children:"默认值"}),(0,i.jsx)(n.th,{children:"说明"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{align:"left",children:"host"}),(0,i.jsx)(n.td,{align:"left",children:"String"}),(0,i.jsx)(n.td,{align:"left",children:"是"}),(0,i.jsx)(n.td,{align:"left",children:(0,i.jsx)(n.a,{href:"https://static-cdn.ry-ltd.site",rel:"noopener noreferrer",target:"_blank",children:"https://static-cdn.ry-ltd.site"})}),(0,i.jsx)(n.td,{children:"平台域名，私有化部署时填写私有化部署的域名"})]})})]}),"\n",(0,i.jsxs)(n.h3,{id:"ipropsdts",children:[(0,i.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#ipropsdts",children:"#"}),"IProps.d.ts"]}),"\n",(0,i.jsx)(n.p,{children:"该文件是物料的类型定义文件,物料的 Schema 通过该文件中定义的 TypeScript 类型结合注释来生成，该文件会自动创建，开发者可根据需求自定义组件 Schema。"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/guide/use/Schema%E5%AE%9A%E4%B9%89.html",children:"物料类型定义"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/guide/framework/type-to-ast.html",children:"TS类型转Schema设计原理"})}),"\n"]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,i.jsx)(n,Object.assign({},e,{children:(0,i.jsx)(s,e)})):s(e)}let a=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["guide%2Fuse%2Fmaterial.md"]={toc:[{id:"创建第一个物料",text:"创建第一个物料",depth:2},{id:"物料发布",text:"物料发布",depth:2},{id:"物料构建",text:"物料构建",depth:3},{id:"物料发布-1",text:"物料发布",depth:3},{id:"升级线上版本",text:"升级线上版本",depth:3},{id:"文件说明",text:"文件说明",depth:2},{id:"wuconfigts",text:"wu.config.ts",depth:3},{id:"配置示例",text:"配置示例",depth:4},{id:"配置项",text:"配置项",depth:4},{id:"ipropsdts",text:"IProps.d.ts",depth:3}],title:"自定义物料",frontmatter:{}}}}]);