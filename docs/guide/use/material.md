# ç‰©æ–™å¼€å‘

## å¼€å‘ç¬¬ä¸€ä¸ªç‰©æ–™

1. å®‰è£…è„šæ‰‹æ¶
   @wu-component/wu-cli æ˜¯äºæ­å»ºå¹³å°é…å¥—ä½¿ç”¨çš„æ•™æˆæ¶ï¼Œç”¨äºç‰©æ–™çš„åˆ›å»ºã€å¼€å‘ã€å‘å¸ƒï¼ˆè¯¥è„šæ‰‹æ¶ä¸ä»…å¯ä»¥å¼€å‘ç‰©æ–™ï¼Œä¹Ÿå¯ä»¥å¼€å‘ WebComponent ä»¥åŠä¼ ç»Ÿçš„ Web é¡¹ç›®ï¼‰ã€‚
   ```
   npm i @wu-component/wu-cli -g
   ```

2. åˆ›å»ºé¡¹ç›®
   ```
   wu create <application-app-name> -c material
   # ä¾‹å¦‚ï¼š wu create lowcode-test-component -c material
   ```
   application-app-name ä¸ºè¦åˆ›å»ºçš„ç‰©æ–™åç§°ã€‚
   
   ç”Ÿæˆçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

   ```
   â”œâ”€â”€ demo                   
   |  â””â”€â”€ basic.md
   â”œâ”€â”€ example
   |  â”œâ”€â”€ example.css
   |  â””â”€â”€ example.tsx
   â”œâ”€â”€ index.html
   â”œâ”€â”€ IProps.d.ts             // ç»„ä»¶çš„ç±»å‹å®šä¹‰ï¼Œæœ€ç»ˆä¼šè½¬æ¢æˆç»„ä»¶é…ç½®é¡¹çš„ schema 
   â”œâ”€â”€ package-lock.json
   â”œâ”€â”€ package.json
   â”œâ”€â”€ README.md
   â”œâ”€â”€ src                     // ç»„ä»¶å¼€å‘å·¥ä½œåŒº
   |  â”œâ”€â”€ index.scss           
   |  â””â”€â”€ index.tsx            // ç»„ä»¶å…¥å£
   â”œâ”€â”€ tsconfig.json
   â”œâ”€â”€ tsconfig.node.json
   â””â”€â”€ wu.config.ts            // ç‰©æ–™å¼€å‘ã€æ„å»ºã€å‘å¸ƒçš„é…ç½®é¡¹
   ``` 

3. å¼€å‘æœåŠ¡å™¨
   å¯åŠ¨å¼€å‘æœåŠ¡å™¨å°±å¯ä»¥æ„‰å¿«çš„å¼€å‘äº†ï¼Œ å‘½ä»¤å¦‚ä¸‹ï¼ˆdev è„šæœ¬ä¼šæ‰§è¡Œ wu devï¼Œåº•å±‚ä¾èµ– vite çš„ dev-serverï¼‰ï¼š
   ```
   npm run dev
   ```

## ç‰©æ–™å‘å¸ƒ

### ç‰©æ–™æ„å»º

æ‰§è¡Œæ„å»ºå‘½ä»¤ buildï¼Œ å‘½ä»¤å¦‚ä¸‹ï¼ˆbuild è„šæœ¬ä¼šæ‰§è¡Œ wu buildï¼Œåº•å±‚ä¾èµ– vite çš„æ„å»ºï¼‰ï¼š

```
   npm run build
```

æ„å»ºçš„äº§ç‰©å¦‚ä¸‹(å’Œwu-config.ts ä¸­çš„ format å…³è”)ï¼š


```
 â”œâ”€â”€ build.json       // æ„å»ºäº§ç‰©çš„æ–‡ä»¶æè¿°
 â”œâ”€â”€ cjs.js           // cjs æ ¼å¼çš„äº§ç‰©
 â”œâ”€â”€ es.js            // es æ ¼å¼çš„äº§ç‰©
 â”œâ”€â”€ iife.js          // iife æ ¼å¼çš„äº§ç‰©
 â”œâ”€â”€ index.html       // ä¸»è¦ç”¨äºæµ‹è¯•é¢„è§ˆç»„ä»¶ï¼Œæ— å®é™…ä½œç”¨
 â”œâ”€â”€ mock.json        // ç»„ä»¶çš„é»˜è®¤é…ç½®
 â”œâ”€â”€ schema.json      // umd æ ¼å¼çš„äº§ç‰©
 â””â”€â”€ umd.js
```

### äº§ç‰©å‘å¸ƒ

æ‰§è¡Œå‘å¸ƒå‘½ä»¤å‰ï¼Œéœ€è¦æ ¡éªŒä»¥ä¸‹ä¸‰é¡¹ï¼š

 1. **ç¡®ä¿è¯¥ç‰©æ–™åœ¨å¹³å°ä¾§å·²ç»åˆ›å»º**ï¼Œè¿›å…¥[ç»„ä»¶ç®¡ç†](https://static-cdn.ry-ltd.site/lowcode-center-web/#/atomManagement/componentManage/list)ï¼Œæ ¹æ®ç»„ä»¶åç§°ï¼ˆ**wu-config-ts ä¸­ meta.lib.nameå±æ€§** ï¼‰æŸ¥è¯¢ï¼Œå¦‚æœç»„ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°ç»„ä»¶ã€‚
     
      ![ç‰©æ–™æ ¡éªŒ](../images/meterial/mater-create-query.png)
   
      å…¶ä¸­è¡¨å•çš„ **ç»„ä»¶åç§°ã€ç»„ä»¶åŒ…å éƒ½éœ€è¦å’Œ wu-config.ts ä¸­ä¸€è‡´ï¼Œ å¯¹åº” meta.lib.nameã€meta.lib.libName**ã€‚
   
      ![åˆ›å»ºç‰©æ–™](../images/meterial/create-metrial.png)

2. ç¡®ä¿æ˜¯å¼€å‘è€… [å¯†é’¥ç”³è¯·](/guide/operation/access)ï¼Œå¹¶ä¸” wu-config.ts ä¸­çš„ user é…ç½®é¡¹å‡†ç¡®æ— è¯¯ã€‚
3. ç¡®ä¿ package.json ä¸­çš„ version å’Œå·²æœ‰ç‰ˆæœ¬ä¸ä¼šå†²çªã€‚

ä¸€åˆ‡å‡†å¤‡å°±ç»ªåæ‰§è¡Œ å‘å¸ƒå‘½ä»¤ï¼š

```
wu upload
```

### å‡çº§çº¿ä¸Šç‰ˆæœ¬

ç»„ä»¶æç¤ºå‘å¸ƒæˆåŠŸåï¼Œè¿›å…¥[ç»„ä»¶ç®¡ç†](https://static-cdn.ry-ltd.site/lowcode-center-web/#/atomManagement/componentManage/list)ï¼Œå¯ä»¥é€šè¿‡ ç‰ˆæœ¬æ—¥å¿—æŸ¥çœ‹ç»„ä»¶è¯¦æƒ…ï¼Œä¹Ÿå¯ä»¥é…Œæƒ…å‡çº§/å‘å¸ƒç»„ä»¶ã€‚
```
    âœ” ç‰©æ–™ä¸Šä¼ æˆåŠŸ
    âœ” ğŸ‰ ğŸ‰ ğŸ‰ ğŸ‰ ç‰©æ–™common-text@1.0.0å‘å¸ƒæˆåŠŸï¼Œè¯·å‰å¾€ç‰©æ–™ä¸­å¿ƒå‡çº§ï¼ï¼ï¼
```

## æ–‡ä»¶è¯´æ˜

### wu.config.ts

#### é…ç½®ç¤ºä¾‹

wu.config.ts åŸºæœ¬é…ç½®å¦‚ä¸‹ï¼š

```ts

import { defineConfig } from '@wu-component/wu-cli';

export default defineConfig({
  meta: {
    type: 'material',
    lib: {
      libName: "LowcodeTestComponent",
      name: "lowcode-test-component",
      formats: ['umd', 'es', 'cjs', 'iife'],
      fileName: format => `${format}.js`,
      external: {
        react: 'React',
        'react-dom': 'ReactDOM',
      }
    },
    user: {
      // å¹³å°çš„ç”¨æˆ·å
      userName: '',
      // å¹³å°ç§˜å¯†ç  ã€æ³¨æ„ä¿å¯†ã€‘
      password: '',
      // éœ€è¦åœ¨å¹³å°ä¾§åˆ›å»ºå¼€å‘è¿™å¯†é’¥ ã€æ³¨æ„ä¿å¯†ã€‘
      accessKey: ''
    }
  }
})
```

#### é…ç½®é¡¹

| åç§°   | ç±»å‹   | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜       |
|:-----|:-----|:---|:----|----------|
| meta | Meta | æ˜¯  | --  | ç‰©æ–™çš„å…ƒæ•°æ®é…ç½® |

##### Meta

| åç§°   | ç±»å‹               | å¿…å¡« | é»˜è®¤å€¼      | è¯´æ˜                                            |
|:-----|:-----------------|:---|:---------|-----------------------------------------------|
| type | ProjectType      | æ˜¯  | material | é¡¹ç›®çš„ç±»å‹ï¼Œæ­¤æ—¶é»˜è®¤ä¸º materialï¼Œæ­¤å€¼è¿˜å¯ä»¥æ˜¯ webã€web-component |
| lib  | ProjectLibConfig | æ˜¯  | --       | ç‰©æ–™æ„å»ºã€å¼€å‘æ—¶çš„é…ç½®ï¼Œåˆ›å»ºé¡¹ç›®æ—¶è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥è‡ªå·±ä¿®æ”¹                  |
| user | CliUser          | å¦  | --       | å‘å¸ƒç‰©æ–™æ—¶çš„ç”¨æˆ·ä¿¡æ¯é…ç½®ï¼Œ1ï¼šéœ€è¦åœ¨å¹³å°æ³¨å†Œæˆä¸ºç”¨æˆ·ï¼Œ2ï¼šéœ€è¦åˆ›å»ºå¼€å‘è€…å¯†é’¥æˆä¸ºå¼€å‘è€…   |


#####  ProjectLibConfig

| åç§°       | ç±»å‹                | å¿…å¡« | é»˜è®¤å€¼                                      | è¯´æ˜                                                |
|:---------|:------------------|:---|:-----------------------------------------|---------------------------------------------------|
| libName  | String            | æ˜¯  | è‡ªåŠ¨ç”Ÿæˆ                                     | ç‰©æ–™ umd æ„å»ºäº§ç‰©çš„å˜é‡åç§°ï¼ŒåŒ vite\webpack çš„ library.name é…ç½® |
| name     | String            | æ˜¯  | è‡ªåŠ¨ç”Ÿæˆ                                     | ç‰©æ–™åç§°ï¼Œå¹³å°å†…å¿…é¡»ä¿æŒå”¯ä¸€æ€§                                   |
| formats  | String[]          | æ˜¯  | ['umd', 'es', 'cjs', 'iife']             | ç‰©æ–™æ„å»ºäº§ç‰©çš„ç±»å‹ï¼Œç±»ä¼¼ vite\webpack çš„format é…ç½®              |
| fileName | (format) =>String | æ˜¯  | format => `${format}.js`                 | ç‰©æ–™æ„å»ºäº§ç‰©çš„fileNameï¼Œç±»ä¼¼ vite\webpack fileName é…ç½®       |
| external | Object            | å¦  | {react: 'React','react-dom': 'ReactDOM'} | ç‰©æ–™æ„å»º externalï¼Œç±»ä¼¼ vite\webpack external é…ç½®         |

#####  CliUser

| åç§°        | ç±»å‹     | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜                                   |
|:----------|:-------|:---|:----|--------------------------------------|
| userName  | String | æ˜¯  | --  | å¹³å°ç”¨æˆ·å                                |
| password  | String | æ˜¯  | --  | å¹³å°å¯†ç                                  |
| accessKey | String | æ˜¯  | --  | å¼€å‘è€…å¯†é’¥ [å¯†é’¥ç”³è¯·](/guide/operation/access) |


### IProps.d.ts

è¯¥æ–‡ä»¶æ˜¯ç‰©æ–™çš„ç±»å‹å®šä¹‰æ–‡ä»¶,ç‰©æ–™çš„ Schema é€šè¿‡è¯¥æ–‡ä»¶ä¸­å®šä¹‰çš„ TypeScript ç±»å‹ç»“åˆæ³¨é‡Šæ¥ç”Ÿæˆï¼Œè¯¥æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œå¼€å‘è€…å¯æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰ç»„ä»¶ Schemaã€‚

1. [ç‰©æ–™ç±»å‹å®šä¹‰](/guide/use/schema) 
2. [TSç±»å‹è½¬Schemaè®¾è®¡åŸç†](/guide/framework/type-to-ast) 
